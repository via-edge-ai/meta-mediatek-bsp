From 54046d175f2324a69e71e0d2eaa8688e75b04098 Mon Sep 17 00:00:00 2001
From: DavidBHHsu <DavidBHHsu@via.com.tw>
Date: Tue, 12 Nov 2024 09:35:18 +0800
Subject: [PATCH] Extend the timeout to 30000 (ms) for waiting for the IPI
 message acknowledgement from camd in the userspace.

---
 .gitignore | 7 +++++++
 mtk_vcu.c  | 4 +++-
 2 files changed, 10 insertions(+), 1 deletion(-)
 create mode 100644 .gitignore

diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..b498526
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1,7 @@
+/*.o
+/*.ko
+/*.cmd
+/*.order
+/*.symvers
+/*.mod
+/*.mod.c
diff --git a/mtk_vcu.c b/mtk_vcu.c
index 669a715..da99aed 100644
--- a/mtk_vcu.c
+++ b/mtk_vcu.c
@@ -58,12 +58,14 @@
 #define MDP_PATH                "/dev/mdpd"
 #define CAM_PATH                "/dev/camd"
 #define VCU_DEVNAME             "vcu"
-
+/*
 #ifdef CONFIG_MTK_ENG_BUILD
 #define IPI_TIMEOUT_MS          16000U
 #else
 #define IPI_TIMEOUT_MS          5000U
 #endif
+*/
+#define IPI_TIMEOUT_MS          30000U
 
 #define VCU_FW_VER_LEN          16
 #define VCODEC_INST_MAX         64
-- 
2.17.1

